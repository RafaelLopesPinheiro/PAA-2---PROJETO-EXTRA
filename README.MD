# VRPTW - Algoritmo GenÃ©tico HÃ­brido

## ğŸ“š PROJETO ACADÃŠMICO - PAA-2 (Projeto Extra)

**Disciplina:** Projeto de AnÃ¡lise de Algoritmos  
**Autor:** Rafael Lopes Pinheiro  
**GitHub:** [@RafaelLopesPinheiro](https://github.com/RafaelLopesPinheiro)  
**Data:** Novembro 2025

---

## ğŸ“‹ DescriÃ§Ã£o do Projeto

ImplementaÃ§Ã£o completa de um **Algoritmo GenÃ©tico HÃ­brido** para resolver o **Vehicle Routing Problem with Time Windows (VRPTW)**, um problema NP-difÃ­cil de otimizaÃ§Ã£o combinatÃ³ria.

**Baseado no artigo cientÃ­fico:**  
*"Research on Vehicle Routing Problem with Time Windows Based on Improved Genetic Algorithm"*  
MDPI Electronics, 2025  
DOI: https://doi.org/10.3390/electronics14040647

---

## ğŸ¯ Objetivo do Problema

Minimizar a **distÃ¢ncia total** percorrida por uma frota de veÃ­culos para atender todos os clientes, respeitando:

âœ… **Capacidade dos veÃ­culos** (carga mÃ¡xima)  
âœ… **Janelas de tempo** de cada cliente (horÃ¡rio de atendimento)  
âœ… **Tempo mÃ¡ximo de rota** por veÃ­culo  
âœ… **Cada cliente visitado exatamente uma vez**  
âœ… **Todas as rotas iniciam e terminam no depÃ³sito**

---

## ğŸ“– INSTRUÃ‡Ã•ES COMPLETAS

**ğŸ”´ LEIA PRIMEIRO:** [`GUIA_EXECUCAO.md`](GUIA_EXECUCAO.md)

Este guia contÃ©m:
1. âœ… **Como executar** o programa passo a passo
2. âœ… **Significado dos parÃ¢metros** de entrada
3. âœ… **Significado da saÃ­da** exibida
4. âœ… **Como variar a entrada** e testar diferentes cenÃ¡rios
5. âœ… ResoluÃ§Ã£o de problemas comuns

---

## ğŸš€ ExecuÃ§Ã£o RÃ¡pida (TL;DR)

```powershell
# 1. Clone o repositÃ³rio
git clone https://github.com/RafaelLopesPinheiro/PAA-2---PROJETO-EXTRA.git
cd PAA-2---PROJETO-EXTRA

# 2. Crie e ative ambiente virtual
python -m venv .venv
.venv\Scripts\Activate.ps1

# 3. Instale dependÃªncias
python -m pip install --upgrade pip setuptools wheel
pip install -r requirements.txt

# 4. Baixe os dados (OBRIGATÃ“RIO)
# Acesse: https://www.kaggle.com/datasets/ghoshsaptarshi/av-genpact-hack-dec2018
# Baixe train.csv e coloque em: data/raw/food_delivery/train.csv

# 5. Execute o programa principal
python main.py
```

**Tempo de execuÃ§Ã£o:** 8-12 minutos (configuraÃ§Ã£o padrÃ£o)

---

## ğŸ§¬ Algoritmos Implementados

### 1. HeurÃ­stica de InserÃ§Ã£o de Solomon (I1)

MÃ©todo construtivo guloso que gera soluÃ§Ãµes iniciais viÃ¡veis:

```
Para cada rota:
  1. Seleciona cliente inicial (mais distante do depot)
  2. Insere clientes usando critÃ©rio:
     c(i,u,j) = Î±Â·c1(i,u,j) + Î»Â·c2(i,u,j)
     onde:
       c1 = custo adicional de distÃ¢ncia
       c2 = custo temporal (urgÃªncia)
  3. Repete atÃ© nÃ£o ser possÃ­vel inserir mais clientes
```

**Complexidade:** O(nÂ³) onde n = nÃºmero de clientes

### 2. Algoritmo GenÃ©tico HÃ­brido

MÃ©todo evolutivo que otimiza a soluÃ§Ã£o inicial:

**Componentes:**
- **RepresentaÃ§Ã£o:** SequÃªncia de clientes agrupados em rotas
- **PopulaÃ§Ã£o inicial (diversificada):**
  - 30% Solomon com parÃ¢metros variados
  - 40% ConstruÃ§Ã£o aleatÃ³ria gulosa
  - 30% MutaÃ§Ãµes da melhor soluÃ§Ã£o
- **SeleÃ§Ã£o:** Torneio (tamanho 5)
- **Crossover:** Order Crossover (OX) - taxa 80%
- **MutaÃ§Ãµes:** Swap, Insertion, Inversion - taxa 20%
- **Busca Local:** 2-opt intra-rota - taxa 30%
- **Elitismo:** Top 20 soluÃ§Ãµes preservadas
- **ReinicializaÃ§Ã£o:** ApÃ³s 50 geraÃ§Ãµes sem melhoria

**Complexidade:** O(G Ã— P Ã— nÂ²) onde:
- G = nÃºmero de geraÃ§Ãµes (padrÃ£o: 300)
- P = tamanho da populaÃ§Ã£o (padrÃ£o: 100)
- n = nÃºmero de clientes

---

## ğŸ“Š Datasets Suportados

### 1. Food Delivery Dataset (Principal)
- **Fonte:** Kaggle - AV Genpact Hack Dec 2018
- **URL:** https://www.kaggle.com/datasets/ghoshsaptarshi/av-genpact-hack-dec2018
- **DescriÃ§Ã£o:** Dados reais de entregas de comida
- **Formato:** CSV com coordenadas lat/lng, itens, timestamps

### 2. Solomon Benchmarks (Opcional)
- **Fonte:** Solomon (1987)
- **URL:** http://web.cba.neu.edu/~msolomon/problems.htm
- **InstÃ¢ncias:** C101, R101, RC101, etc.

---

## ï¿½ Estrutura do CÃ³digo-Fonte

```
PAA-2---PROJETO-EXTRA/
â”‚
â”œâ”€â”€ main.py                          â† EXECUTAR ESTE ARQUIVO
â”œâ”€â”€ GUIA_EXECUCAO.md                 â† LEIA ESTE GUIA PRIMEIRO
â”œâ”€â”€ README.MD                        â† VocÃª estÃ¡ aqui
â”œâ”€â”€ requirements.txt                 â† DependÃªncias Python
â”‚
â”œâ”€â”€ src/                             â† CÃ³digo-fonte modular
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ utils.py                     # FunÃ§Ãµes auxiliares
â”‚   â”œâ”€â”€ food_delivery_loader.py      # Carregador de dados reais
â”‚   â”œâ”€â”€ solomon_loader.py            # Carregador benchmarks
â”‚   â”œâ”€â”€ heuristics.py                # HeurÃ­stica de Solomon
â”‚   â”œâ”€â”€ genetic_algorithm.py         # Algoritmo GenÃ©tico
â”‚   â””â”€â”€ visualization.py             # GeraÃ§Ã£o de grÃ¡ficos
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â””â”€â”€ food_delivery/
â”‚   â”‚       â””â”€â”€ train.csv            â† BAIXE ESTE ARQUIVO
â”‚   â””â”€â”€ processed/
â”‚       â””â”€â”€ vrptw_instances.json     # InstÃ¢ncias processadas
â”‚
â””â”€â”€ results/                         â† SaÃ­das geradas automaticamente
    â”œâ”€â”€ solutions/                   # JSON com rotas
    â”œâ”€â”€ plots/                       # GrÃ¡ficos PNG
    â””â”€â”€ report.txt                   # RelatÃ³rio tÃ©cnico completo
```

---

## ğŸ“ˆ Resultados e SaÃ­das

O programa gera automaticamente:

### 1. SoluÃ§Ãµes em JSON
- `results/solutions/solution_solomon.json` - SoluÃ§Ã£o inicial
- `results/solutions/solution_genetic_algorithm.json` - SoluÃ§Ã£o otimizada

### 2. VisualizaÃ§Ãµes (PNG)
- `solution_solomon.png` - Mapa de rotas inicial
- `solution_genetic_algorithm.png` - Mapa de rotas otimizado
- `convergence.png` - GrÃ¡fico de convergÃªncia do AG
- `comparison.png` - ComparaÃ§Ã£o lado a lado
- `time_windows.png` - Cumprimento de janelas de tempo

### 3. RelatÃ³rio TÃ©cnico
- `results/report.txt` - RelatÃ³rio completo com:
  - ReferÃªncia do artigo
  - DescriÃ§Ã£o do problema
  - Algoritmos implementados
  - AnÃ¡lise de complexidade
  - Resultados experimentais
  - ConclusÃµes

---

## ğŸ”§ ParÃ¢metros ConfigurÃ¡veis

### Dados
- `max_customers`: 40 (padrÃ£o) - NÃºmero de entregas
- `vehicle_capacity`: 50.0 (padrÃ£o) - Capacidade por veÃ­culo

### Solomon
- `alpha`: 1.0 - Peso para distÃ¢ncia
- `lambda_param`: 2.0 - Peso para urgÃªncia

### Algoritmo GenÃ©tico
- `pop_size`: 100 - Tamanho da populaÃ§Ã£o
- `generations`: 300 - NÃºmero de geraÃ§Ãµes
- `crossover_rate`: 0.8 - Taxa de crossover
- `mutation_rate`: 0.2 - Taxa de mutaÃ§Ã£o

**Para detalhes completos:** veja [`GUIA_EXECUCAO.md`](GUIA_EXECUCAO.md) seÃ§Ã£o 2

---

## ï¿½ Resultados TÃ­picos

Melhoria mÃ©dia do AG sobre Solomon:
- âœ… **DistÃ¢ncia:** -15% a -25%
- âœ… **VeÃ­culos:** -1 a -2 veÃ­culos
- âœ… **Fitness:** -20% a -30%

---

## ğŸ” AnÃ¡lise de Complexidade

### HeurÃ­stica de Solomon
- **Tempo:** O(nÂ³)
- **EspaÃ§o:** O(nÂ²)

### Algoritmo GenÃ©tico
- **Tempo:** O(G Ã— P Ã— nÂ²)
  - G = 300 geraÃ§Ãµes
  - P = 100 populaÃ§Ã£o
  - n = 40 clientes
  - Total: ~360M operaÃ§Ãµes
- **EspaÃ§o:** O(P Ã— n)

**Tempo real (hardware mÃ©dio):** 8-12 minutos

---

## ğŸ“š ReferÃªncias

1. **Electronics (2025).** Research on Vehicle Routing Problem with Time Windows Based on Improved Genetic Algorithm. MDPI. https://doi.org/10.3390/electronics14040647

2. **Solomon, M. M. (1987).** Algorithms for the vehicle routing and scheduling problems with time window constraints. Operations Research, 35(2), 254-265.

3. **BrÃ¤ysy, O., & Gendreau, M. (2005).** Vehicle routing problem with time windows, Part I: Route construction and local search algorithms. Transportation Science, 39(1), 104-118.

---

## ğŸ“ LicenÃ§a

Este Ã© um projeto acadÃªmico para fins educacionais.

---

## ğŸ‘¤ Autor

**Rafael Lopes Pinheiro**  
GitHub: [@RafaelLopesPinheiro](https://github.com/RafaelLopesPinheiro)  
RepositÃ³rio: https://github.com/RafaelLopesPinheiro/PAA-2---PROJETO-EXTRA

---

**Ãšltima atualizaÃ§Ã£o:** 23/11/2025